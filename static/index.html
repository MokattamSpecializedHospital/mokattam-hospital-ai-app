<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>جدول العيادات الخارجية - مستشفى المقطم التخصصي</title>
<!-- Font Awesome Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
<!-- Google Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">

<style>
    :root {
        --dark-green: #2a6465;
        --gold: #fcd88f;
        --white: #ffffff;
        --text-dark: #212529;
        --text-muted: #6c757d;
        --whatsapp-green: #25D366;
        --primary-glow: rgba(42, 100, 101, 0.4);
        --gold-glow: rgba(252, 216, 143, 0.7);
    }
    html { scroll-behavior: smooth; }
    body {
        font-family: 'Cairo', sans-serif;
        background-color: #f0f2f5;
        margin: 0;
        padding: 20px 15px;
        display: flex;
        justify-content: center;
        color: var(--text-dark);
    }
    .page {
        background: var(--white);
        width: 100%;
        max-width: 900px;
        padding: 25px;
        box-shadow: 0 5px 30px rgba(0,0,0,0.1);
        border-radius: 15px;
        box-sizing: border-box;
        overflow: hidden;
    }
    .logo-container { text-align: center; margin: -25px -25px 25px -25px; }
    .logo-image { width: 100%; height: auto; }

    /* --- تصميم احترافي جديد للمعلومات --- */
    .info-professional {
        background-color: #f8f9fa;
        border-radius: 10px;
        padding: 20px;
        margin-bottom: 25px;
        text-align: right;
    }
    .info-professional h1 {
        font-size: 20px;
        margin-top: 0;
        margin-bottom: 5px;
        color: var(--dark-green);
    }
    .info-professional .en-title {
        font-family: 'Poppins', sans-serif;
        font-size: 14px;
        color: var(--text-muted);
        margin-bottom: 20px;
        display: block;
    }
    .info-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 15px;
    }
    .info-item { display: flex; align-items: center; gap: 15px; line-height: 1.6; }
    .info-item i { font-size: 22px; color: var(--gold); width: 25px; text-align: center; }
    .info-item-text strong { font-family: 'Poppins', sans-serif; font-weight: 600; font-size: 1.1em; }
    .info-item-text .en { font-family: 'Poppins', sans-serif; font-size: 0.8em; color: var(--text-muted); display: block; }

    .feature-box { text-align: center; margin-bottom: 25px; padding: 20px; background-color: #e6f3f3; border: 1px solid var(--dark-green); border-radius: 10px; }
    .feature-box h2 { font-size: 18px; color: var(--dark-green); margin-top: 0; }
    .feature-box p { font-size: 14px; color: var(--text-muted); }
    .feature-box textarea, .feature-box input { width: 100%; padding: 12px 15px; border-radius: 8px; border: 1px solid #ccc; font-family: 'Cairo', sans-serif; font-size: 14px; margin-bottom: 15px; box-sizing: border-box; }
    .feature-box .input-wrapper { position: relative; display: flex; gap: 10px; align-items: center; }
    .feature-box input { flex-grow: 1; margin-bottom: 0; }
    .feature-box button { background-color: var(--dark-green); color: var(--white); border: none; padding: 10px 20px; font-size: 16px; font-weight: 600; border-radius: 8px; cursor: pointer; transition: all 0.3s; margin: 5px 0; line-height: 1.5; }
    .feature-box button:disabled { background-color: #999; cursor: not-allowed; }
    .feature-box button.go-to-btn, #doctor-search-btn { background-color: var(--gold); color: var(--dark-green); }
    .feature-box button:hover:not(:disabled) { opacity: 0.9; transform: translateY(-2px); }
    
    #recommendation-result-container { margin-top: 15px; }
    .recommendation-card { background-color: var(--white); border: 1px solid #ddd; border-radius: 10px; padding: 15px; margin-bottom: 15px; text-align: right; transition: all 0.3s ease; }
    .recommendation-card.primary-recommendation { border: 2px solid var(--dark-green); box-shadow: 0 0 20px var(--primary-glow); }
    .recommendation-header { display: flex; align-items: center; gap: 15px; margin-bottom: 10px; }
    .recommendation-header .icon {
        width: 48px;
        height: 48px;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative; 
        overflow: hidden; 
    }
    .recommendation-card.primary-recommendation .recommendation-header .icon {
        animation: pulse 1.5s infinite ease-in-out;
    }
    .recommendation-card.primary-recommendation .recommendation-header .icon::after {
        content: '';
        position: absolute;
        top: -50%;
        left: -60%;
        width: 20%;
        height: 200%;
        background: linear-gradient(to right, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0.5) 50%, rgba(255, 255, 255, 0) 100%);
        transform: rotate(35deg);
        animation: sheen 3s infinite;
    }

    @keyframes pulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.1); }
    }
    @keyframes sheen {
        0% { left: -60%; }
        100% { left: 140%; }
    }

    .recommendation-header .icon .svg-icon {
        width: 100%;
        height: 100%;
        -webkit-mask-size: contain;
        mask-size: contain;
        -webkit-mask-repeat: no-repeat;
        mask-repeat: no-repeat;
        background-color: var(--dark-green); 
    }
    .recommendation-header .icon .fa-solid {
        font-size: 28px;
        color: var(--dark-green);
    }
    .recommendation-header h3 { margin: 0; font-size: 20px; color: var(--text-dark); }
    .recommendation-badge { background-color: var(--dark-green); color: white; font-size: 11px; font-weight: bold; padding: 3px 8px; border-radius: 12px; margin-right: auto; }
    .recommendation-reason { font-size: 15px; line-height: 1.8; color: var(--text-muted); margin-bottom: 15px; text-align: justify; }
    
    #search-results-container { margin-top: 15px; text-align: right; }
    #search-results-container .result-item { display: flex; justify-content: space-between; align-items: center; padding: 10px; border-bottom: 1px solid #eee; }
    #search-results-container .result-item:last-child { border-bottom: none; }
    .result-info strong { font-size: 1em; color: var(--text-dark); }
    .result-info .clinic-name { font-size: 0.8em; color: var(--text-muted); }
    .loader { border: 4px solid #f3f3f3; border-top: 4px solid var(--dark-green); border-radius: 50%; width: 25px; height: 25px; animation: spin 1s linear infinite; margin: 10px auto; display: none; }
    .section-title { background-color: var(--dark-green); color: var(--white); padding: 12px 20px; border-radius: 10px; margin-top: 35px; margin-bottom: 20px; display: flex; align-items: center; gap: 15px; }
    .section-title .icon { width: 48px; height: 48px; display: flex; align-items: center; justify-content: center; }
    .section-title .icon .svg-icon {
        width: 100%;
        height: 100%;
        background-color: var(--white);
        -webkit-mask-size: contain;
        mask-size: contain;
        -webkit-mask-repeat: no-repeat;
        mask-repeat: no-repeat;
    }
    .section-title .icon .fa-solid { font-size: 28px; }
    .section-title .title-text { flex-grow: 1; }
    .section-title .title-text h2 { font-size: 20px; font-weight: 700; margin:0; }
    .section-title .title-text h3 { font-family: 'Poppins', sans-serif; font-size: 14px; font-weight: 400; opacity: 0.9; margin:0; }
    .title-nav-buttons { display: flex; gap: 10px; margin-left: auto; }
    .nav-btn { background: rgba(255,255,255,0.2); border: none; color: white; width: 30px; height: 30px; border-radius: 50%; cursor: pointer; transition: background-color 0.3s; font-size: 14px; }
    .nav-btn:hover { background: rgba(255,255,255,0.4); }
    
    .doctor-card { display: block; margin-bottom: 15px; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1); border: 1px solid #eee; transition: all 0.3s; }
    .doctor-card.highlight { box-shadow: 0 0 15px 5px var(--gold-glow); transform: scale(1.02); border-color: var(--gold); }
    .doctor-card .doctor-name { background-color: #f8f9fa; text-align: center; padding: 12px; font-size: 16px; font-weight: 600; }
    .doctor-card .appointment { display: flex; justify-content: space-between; align-items: center; padding: 12px 15px; font-size: 14px; border-bottom: 1px solid #eee; }
    .doctor-card .appointment:last-child { border-bottom: none; }
    .doctor-card .day { font-weight: bold; color: var(--dark-green); text-align: right; }
    .doctor-card .day .en, .doctor-card .doctor-name .en { font-family: 'Poppins', sans-serif; font-size: 0.85em; font-weight: 400; margin-top: 2px; color: #555;}
    .doctor-card .time { font-weight: 600; font-family: 'Poppins', sans-serif; font-size: 15px; background-color: var(--gold); color: var(--dark-green); padding: 3px 10px; border-radius: 5px; }
    .en { font-family: 'Poppins', sans-serif; font-size: 0.9em; font-weight: 400; margin-top: 2px; }
    .footer-image-container { margin: 40px -25px -25px -25px; }
    .footer-image { width: 100%; height: auto; display: block; }
    .whatsapp-section { text-align: center; padding: 20px; margin-top: 30px; }
    .whatsapp-btn { display: inline-block; background-color: var(--whatsapp-green); color: white; padding: 10px 25px; border-radius: 25px; text-decoration: none; font-weight: 600; font-size: 16px; transition: transform 0.2s; }
    .whatsapp-btn:hover { transform: scale(1.05); }
    .whatsapp-btn i { margin-left: 10px; }
</style>
</head>
<body>

<div class="page" id="page-top">
    <div class="logo-container"><img src="https://i.ibb.co/jv4t9yMt/LOGO-1.png" alt="Mokattam Specialized Hospital Logo" class="logo-image"></div>
    
    <div class="info-professional">
        <h1>نتشرف باستقبال حضراتكم بالعيادات الخارجية</h1>
        <span class="en-title">We are honored to welcome you at the Outpatient Clinics</span>
        <div class="info-grid">
            <div class="info-item">
                <i class="fa-solid fa-phone"></i>
                <div class="info-item-text">
                    للحجز والاستفسار: <strong>16897</strong>
                    <span class="en">For booking & inquiries</span>
                </div>
            </div>
            <div class="info-item">
                <i class="fa-brands fa-whatsapp"></i>
                <div class="info-item-text">
                    واتساب: <strong>01033366629</strong>
                    <span class="en">WhatsApp</span>
                </div>
            </div>
            <div class="info-item">
                <i class="fa-solid fa-map-marker-alt"></i>
                <div class="info-item-text">
                    العنوان: <strong>شارع ٩ - المقطم</strong>
                    <span class="en">Address: Street 9, Mokattam</span>
                </div>
            </div>
            <div class="info-item">
                <i class="fa-solid fa-receipt"></i>
                <div class="info-item-text">
                    الرقم الضريبي: <strong>٠٠٨-٤٨٩-٦٩٩</strong>
                    <span class="en">Tax ID: 699-489-008</span>
                </div>
            </div>
        </div>
    </div>

    <!-- البحث باسم الطبيب -->
    <div class="feature-box" id="search-box">
        <h2>البحث باسم الطبيب</h2>
        <div class="input-wrapper">
            <input type="text" id="doctor-search-input" placeholder="اكتب اسم الطبيب هنا...">
            <button id="doctor-search-btn">ابحث</button>
        </div>
        <div id="search-results-container" style="display: none;"></div>
    </div>

    <!-- التوصية الذكية بالعيادة -->
    <div class="feature-box">
        <h2>لست متأكدًا أي عيادة تختار؟</h2>
        <p>صف لنا الأعراض التي تشعر بها، وسيقوم المساعد الذكي باقتراح التخصص الأنسب لك.</p>
        <textarea id="symptoms-input" placeholder="مثال: أشعر بألم حاد في جنبي الأيمن وحرقان في البول..."></textarea>
        <button id="get-recommendation-btn">✨ أرشدني للعيادة الصحيحة</button>
        <div id="loader" class="loader"></div>
        <div id="recommendation-result-container">
            <!-- النتائج الذكية ستظهر هنا -->
        </div>
    </div>

    <!-- باقي محتوى الصفحة -->
    <div id="clinics-container"></div>
    <div class="whatsapp-section" id="whatsapp-section">
        <p>للتحدث مع خدمة العملاء يمكنك التواصل عبر خدمة واتساب</p>
        <a href="https://api.whatsapp.com/send?phone=%2B201033366629" target="_blank" class="whatsapp-btn">
            تواصل معنا <i class="fab fa-whatsapp"></i>
        </a>
    </div>
    <div class="footer-image-container">
        <img src="https://i.ibb.co/Mx1BZJn3/C.png" alt="Hospital Contracts" class="footer-image">
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    
    // بيانات العيادات والأطباء الكاملة
    const allClinicsFullData = [
        { id: "الباطنة-العامة", doctors: [ { name: "د. ممدوح القاسم (استشاري)", en_name: "Dr. Mamdouh Elkassem (Consultant)", schedule: { "السبت": "04:30 PM", "الأحد": "02:00 PM", "الإثنين": "07:00 PM", "الثلاثاء": "12:00 PM", "الأربعاء": "07:00 PM", "الخميس": "12:00 PM" } }, { name: "د. نيفين الفولي (استشاري)", en_name: "Dr. Nevine Elfouly (Consultant)", schedule: { "الأحد": "08:00 PM", "الأربعاء": "02:00 PM" } }, { name: "د. سمير كامل (استشاري)", en_name: "Dr. Samir Kamel (Consultant)", schedule: { "السبت": "03:30 PM", "الإثنين": "03:30 PM", "الأربعاء": "03:30 PM" } }, { name: "د. مجدي لبيب (استشاري)", en_name: "Dr. Magdy Labib (Consultant)", schedule: { "السبت": "12:00 PM", "الأحد": "12:00 PM", "الإثنين": "12:00 PM", "الثلاثاء": "05:00 PM", "الخميس": "05:00 PM" } }, { name: "د. ولاء الباز (استشاري)", en_name: "Dr. Walaa Elbaz (Consultant)", schedule: { "السبت": "08:00 PM", "الثلاثاء": "08:00 PM", "الخميس": "02:00 PM" } }, { name: "د. عمرو صدقي (استشاري)", en_name: "Dr. Amr Sedky (Consultant)", schedule: { "الإثنين": "02:00 PM", "الخميس": "04:00 PM" } }, { name: "د. مروه محمد (استشاري)", en_name: "Dr. Marwa Mohamed (Consultant)", schedule: { "الخميس": "08:00 PM" } }, { name: "د. سالي سالم (اخصائي)", en_name: "Dr. Sally Salem (Specialist)", schedule: { "الأحد": "08:00 PM", "الإثنين": "05:00 PM" } }, { name: "د. يوسف نصار (استشاري)", en_name: "Dr. Youssef Nassar (Consultant)", schedule: { "الإثنين": "01:00 PM" } }, { name: "د. حاتم عبد العزيز (استشاري)", en_name: "Dr. Hatem Abdelaziz (Consultant)", schedule: { "الأحد": "03:00 PM", "الإثنين": "04:30 PM", "الأربعاء": "05:00 PM", "الخميس": "07:30 PM", "الجمعة": "03:00 PM" } } ] },
        { id: "غدد-صماء-وسكر", doctors: [ { name: "د. يوسف نصار (استشاري)", en_name: "Dr. Youssef Nassar (Consultant)", schedule: { "الإثنين": "01:00 PM" } }, { name: "د. سالي سالم (اخصائي)", en_name: "Dr. Sally Salem (Specialist)", schedule: { "السبت": "08:00 PM", "الإثنين": "05:00 PM" } }, { name: "د. احمد فياض (استشاري)", en_name: "Dr. Ahmed Fayad (Consultant)", schedule: { "الأحد": "06:00 PM", "الأربعاء": "06:00 PM" } } ] },
        { id: "جهاز-هضمي-ومناظير", doctors: [ { name: "د. الشيماء مسعد (استشاري)", en_name: "Dr. Alshaymaa Mosaad (Consultant)", schedule: { "الخميس": "01:00 PM" } }, { name: "د. مريم مسعد (استشاري)", en_name: "Dr. Mariam Mosaad (Consultant)", schedule: { "الإثنين": "08:00 PM" } }, { name: "د. مروه محمد (استشاري)", en_name: "Dr. Marwa Mohamed (Consultant)", schedule: { "الخميس": "08:00 PM" } }, { name: "د. يوسف نصار (استشاري)", en_name: "Dr. Youssef Nassar (Consultant)", schedule: { "الإثنين": "01:00 PM" } }, { name: "د. عماد عبد الستار (استشاري)", en_name: "Dr. Emad Abdelsattar (Consultant)", schedule: { "الأحد": "06:00 PM" } } ] },
        { id: "باطنة-وقلب", doctors: [ { name: "د. اسامه الجيار (استشاري)", en_name: "Dr. Osama Elgayyar (Consultant)", schedule: { "السبت": "12:30 PM", "الأربعاء": "12:30 PM" } } ] },
        { id: "الجراحة-العامة", doctors: [ { name: "د. احمد شبل (استشاري)", en_name: "Dr. Ahmed Shebl (Consultant)", schedule: { "السبت": "08:00 PM", "الأربعاء": "02:00 PM" } }, { name: "د. نهى عبد الباقي (استشاري)", en_name: "Dr. Noha Abdelbaky (Consultant)", schedule: { "الإثنين": "06:00 PM", "الثلاثاء": "06:00 PM" } }, { name: "د. احمد عبد العال (استشاري)", en_name: "Dr. Ahmed Abdel-aal (Consultant)", schedule: { "الإثنين": "02:00 PM" } }, { name: "د. مينا إسحاق (استشاري)", en_name: "Dr. Mina Ishak (Consultant)", schedule: { "السبت": "06:30 PM", "الإثنين": "06:30 PM" } }, { name: "د. هشام وفقي (استشاري)", en_name: "Dr. Hesham Wafky (Consultant)", schedule: { "الأحد": "04:00 PM" } }, { name: "د. احمد عصام (اخصائي)", en_name: "Dr. Ahmed Essam (Specialist)", schedule: { "الخميس": "06:30 PM" } }, { name: "د. احمد فتحي (استشاري)", en_name: "Dr. Ahmed Fathy (Consultant)", schedule: { "السبت": "08:00 PM", "الأربعاء": "08:00 PM", "الخميس": "08:00 PM" } }, { name: "د. رجب صلاح (استشاري)", en_name: "Dr. Ragab Salah (Consultant)", schedule: { "الإثنين": "04:00 PM", "الخميس": "04:00 PM" } }, { name: "د. سيد الجارحي (استشاري)", en_name: "Dr. Sayed Elgarhy (Consultant)", schedule: { "الإثنين": "08:30 PM", "الخميس": "02:00 PM" } }, { name: "د. عادل لاشين (استشاري)", en_name: "Dr. Adel Lashin (Consultant)", schedule: { "الأحد": "02:00 PM", "الثلاثاء": "08:00 PM" } }, { name: "محمد عبد الكريم قاسم (استشاري)", en_name: "Mohamed Abdelkarim (Consultant)", schedule: { "الأحد": "08:30 PM", "الأربعاء": "08:30 PM" } }, { name: "دينا الجمال (اخصائي)", en_name: "Dina Elgamal (Specialist)", schedule: { "الأربعاء": "06:00 PM", "الجمعة": "05:00 PM" } }, { name: "معتز محمد (اخصائي)", en_name: "Moataz Mohamed (Specialist)", schedule: { "الأربعاء": "08:00 PM", "الجمعة": "08:00 PM" } }, { name: "منى ابوزيد (استشاري)", en_name: "Mona Abouzid (Consultant)", schedule: { "الإثنين": "08:00 PM", "الأربعاء": "08:00 PM", "الجمعة": "02:00 PM" } } ] },
        { id: "مناعة-وروماتيزم", doctors: [ { name: "د. يوسف نصار (استشاري)", en_name: "Dr. Youssef Nassar (Consultant)", schedule: { "الإثنين": "01:00 PM" } }, { name: "د. ولاء الباز (استشاري)", en_name: "Dr. Walaa Elbaz (Consultant)", schedule: { "السبت": "08:00 PM", "الثلاثاء": "08:00 PM", "الخميس": "02:00 PM" } } ] },
        { id: "نساء-وتوليد", doctors: [ { name: "د. كوثر علي (اخصائي)", en_name: "Dr. Kawthar Ali (Specialist)", schedule: { "السبت": "04:00 PM", "الإثنين": "05:00 PM" } }, { name: "د. احمد طايع (استشاري)", en_name: "Dr. Ahmed Tayea (Consultant)", schedule: { "الثلاثاء": "05:30 PM", "الأربعاء": "06:30 PM" } }, { name: "د. منار خالد (استشاري)", en_name: "Dr. Manar Khaled (Consultant)", schedule: { "الأربعاء": "02:00 PM" } }, { name: "د. اميره سعيد (اخصائي)", en_name: "Dr. Amira Saeed (Specialist)", schedule: { "الأحد": "02:00 PM", "الخميس": "01:00 PM" } }, { name: "د. محمد مكي (استشاري)", en_name: "Dr. Mohamed Makky (Consultant)", schedule: { "الأحد": "05:00 PM", "الأربعاء": "04:00 PM" } } ] },
        { id: "أنف-وأذن-وحنجرة", doctors: [ { name: "د. احمد عماد (اخصائي)", en_name: "Dr. Ahmed Emad (Specialist)", schedule: { "السبت": "02:00 PM" } }, { name: "د. محمود عبدالحميد (استشاري)", en_name: "Dr. Mahmoud Abdelhamid (Consultant)", schedule: { "الخميس": "06:00 PM" } }, { name: "د. توفيق الخولي (استشاري)", en_name: "Dr. Tawfik Elkhouly (Consultant)", schedule: { "الإثنين": "04:00 PM" } }, { name: "د. محمد هلالي (استشاري)", en_name: "Dr. Mohamed Helaly (Consultant)", schedule: { "الإثنين": "08:00 PM", "الأربعاء": "04:00 PM" } }, { name: "د. أشرف رأفت (استشاري)", en_name: "Dr. Ashraf Raafat (Consultant)", schedule: { "الثلاثاء": "06:00 PM", "الجمعة": "03:00 PM" } }, { name: "د. احمد امين (استشاري)", en_name: "Dr. Ahmed Amin (Consultant)", schedule: { "السبت": "08:00 PM", "الخميس": "08:00 PM" } }, { name: "د. سامح نظمي (استشاري)", en_name: "Dr. Sameh Nazmy (Consultant)", schedule: { "الأحد": "08:30 PM", "الثلاثاء": "08:30 PM", "الأربعاء": "08:30 PM" } } ] },
        { id: "الصدر", doctors: [ { name: "د. مني الهادي (استشاري)", en_name: "Dr. Mona Elhady (Consultant)", schedule: { "الأحد": "05:00 PM", "الإثنين": "02:00 PM", "الأربعاء": "02:00 PM" } }, { name: "د. احمد سيف (استشاري)", en_name: "Dr. Ahmed Seif (Consultant)", schedule: { "الإثنين": "04:00 PM", "الخميس": "08:00 PM", "الجمعة": "03:00 PM" } } ] },
        { id: "أمراض-الذكورة", doctors: [ { name: "د. شريف البرعي (استشاري)", en_name: "Dr. Sherif Elborai (Consultant)", schedule: { "الأحد": "06:30 PM" } } ] },
        { id: "الجلدية", doctors: [ { name: "د. محمد هاشم البطريق (استشاري)", en_name: "Dr. Mohamed Hashem (Consultant)", schedule: { "السبت": "12:00 PM" } }, { name: "د. لبني جمال (اخصائي)", en_name: "Dr. Lobna Gamal (Specialist)", schedule: { "الإثنين": "08:30 PM", "الأربعاء": "01:00 PM" } }, { name: "د. اميره عبدالرحمن (استشاري)", en_name: "Dr. Amira Abdelrahman (Consultant)", schedule: { "الأحد": "07:00 PM", "الثلاثاء": "06:30 PM", "الخميس": "02:00 PM" } }, { name: "د. ميرفت بشري (استشاري)", en_name: "Dr. Mervat Bishri (Consultant)", schedule: { "السبت": "05:30 PM", "الإثنين": "05:30 PM", "الأربعاء": "05:30 PM", "الخميس": "05:30 PM" } }, { name: "د. مالك فتحي (استشاري)", en_name: "Dr. Malek Fathy (Consultant)", schedule: { "السبت": "08:30 PM", "الثلاثاء": "08:30 PM" } } ] },
        { id: "العظام", doctors: [ { name: "د. محمد الديب (استشاري)", en_name: "Dr. Mohamed Eldeeb (Consultant)", schedule: { "الإثنين": "12:30 PM", "الثلاثاء": "02:30 PM", "الخميس": "08:00 PM" } }, { name: "د. اسامه ثابت (استشاري)", en_name: "Dr. Osama Thabet (Consultant)", schedule: { "الأحد": "06:00 PM", "الإثنين": "12:00 PM", "الجمعة": "01:30 PM" } }, { name: "د. احمد ريان (استشاري)", en_name: "Dr. Ahmed Rayan (Consultant)", schedule: { "الخميس": "11:30 AM" } }, { name: "د. محمد زكريا (استشاري)", en_name: "Dr. Mohamed Zakaria (Consultant)", schedule: { "السبت": "03:00 PM", "الأربعاء": "03:00 PM" } }, { name: "د. عادل عبدالغني (استشاري)", en_name: "Dr. Adel Abdelghany (Consultant)", schedule: { "الخميس": "04:00 PM" } }, { name: "د. احمد سعيد خليل (استشاري)", en_name: "Dr. Ahmed Said Khalil (Consultant)", schedule: { "الأربعاء": "01:00 PM" } }, { name: "د. محمد صلاح (استشاري)", en_name: "Dr. Mohamed Salah (Consultant)", schedule: { "السبت": "03:00 PM", "الإثنين": "08:00 PM", "الجمعة": "03:00 PM" } }, { name: "د. عبدالفتاح الديب (استشاري)", en_name: "Dr. Abdelfattah Eldeeb (Consultant)", schedule: { "الأحد": "05:00 PM", "الثلاثاء": "02:00 PM" } }, { name: "د. كريم سمير (استشاري)", en_name: "Dr. Karim Samir (Consultant)", schedule: { "الإثنين": "04:00 PM" } }, { name: "د. على عماره (استشاري)", en_name: "Dr. Ali Emara (Consultant)", schedule: { "السبت": "08:00 PM", "الأحد": "08:00 PM" } }, { name: "د. محمود الملاح (استشاري)", en_name: "Dr. Mahmoud Elmallah (Consultant)", schedule: { "السبت": "12:00 PM", "الثلاثاء": "12:00 PM" } }, { name: "د. سامي مصيلحي (استشاري)", en_name: "Dr. Samy Moselhy (Consultant)", schedule: { "الإثنين": "05:00 PM", "الأربعاء": "08:00 PM" } }, { name: "د. محمد عبدالعظيم (استشاري)", en_name: "Dr. Mohamed Abdelazim (Consultant)", schedule: { "الأربعاء": "05:00 PM" } }, { name: "د. محمد عويس (اخصائي)", en_name: "Dr. Mohamed Oweiss (Specialist)", schedule: { "الإثنين": "06:00 PM", "الخميس": "02:00 PM" } }, { name: "د. زياد خالد (استشاري)", en_name: "Dr. Ziad Khaled (Consultant)", schedule: { "الخميس": "06:00 PM" } }, { name: "د. عمرو ابوالمجد (استشاري)", en_name: "Dr. Amr Aboulmagd (Consultant)", schedule: { "الإثنين": "07:30 PM", "الثلاثاء": "11:00 AM" } } ] },
        { id: "المخ-والأعصاب-باطنة", doctors: [ { name: "د. احمد سرحان (استشاري)", en_name: "Dr. Ahmed Sarhan (Consultant)", schedule: { "السبت": "08:00 PM", "الإثنين": "08:00 PM" } }, { name: "د. منال حافظ (استشاري)", en_name: "Dr. Manal Hafez (Consultant)", schedule: { "الأحد": "05:30 PM", "الأربعاء": "05:30 PM" } } ] },
        { id: "جراحة-المخ-والأعصاب", doctors: [ { name: "د. رباب يحيي (استشاري)", en_name: "Dr. Rabab Yehia (Consultant)", schedule: { "السبت": "04:30 PM" } }, { name: "د. احمد يسري (استشاري)", en_name: "Dr. Ahmed Yousry (Consultant)", schedule: { "السبت": "07:00 PM" } }, { name: "د. حسين زكريا (استشاري)", en_name: "Dr. Hussein Zakaria (Consultant)", schedule: { "الأحد": "08:30 PM", "الأربعاء": "08:30 PM" } } ] },
        { id: "المسالك-البولية", doctors: [ { name: "د. السيد صالح (استشاري)", en_name: "Dr. Elsayed Saleh (Consultant)", schedule: { "السبت": "04:30 PM", "الأربعاء": "03:00 PM" } }, { name: "د. احمد سادات (استشاري)", en_name: "Dr. Ahmed Sadat (Consultant)", schedule: { "السبت": "07:30 PM", "الأربعاء": "07:30 PM" } }, { name: "د. محمد طلعت (استشاري)", en_name: "Dr. Mohamed Talaat (Consultant)", schedule: { "الأحد": "07:00 PM", "الأربعاء": "07:00 PM" } }, { name: "د. وليد موسى (استشاري)", en_name: "Dr. Walid Moussa (Consultant)", schedule: { "الإثنين": "05:30 PM", "الخميس": "05:30 PM" } } ] },
        { id: "الأوعية-الدموية", doctors: [ { name: "د. محمد حاتم (استشاري)", en_name: "Dr. Mohamed Hatem (Consultant)", schedule: { "السبت": "12:00 PM", "الثلاثاء": "12:00 PM" } }, { name: "د. نهال فاروق (استشاري)", en_name: "Dr. Nehal Farouk (Consultant)", schedule: { "السبت": "02:00 PM", "الأربعاء": "02:00 PM" } }, { name: "د. شريف شرابي (استشاري)", en_name: "Dr. Sherif Sharaby (Consultant)", schedule: { "الأحد": "07:00 PM", "الثلاثاء": "07:00 PM", "الخميس": "08:00 PM" } }, { name: "د. محمد اسامه زايد (استشاري)", en_name: "Dr. Mohamed Osama Zayed (Consultant)", schedule: { "الأربعاء": "06:00 PM" } } ] },
        { id: "الأطفال", doctors: [ { name: "د. نسرين عبدالرحمن (استشاري)", en_name: "Dr. Nesrin Abdelrahman (Consultant)", schedule: { "السبت": "01:00 PM", "الإثنين": "01:00 PM", "الثلاثاء": "02:00 PM", "الخميس": "06:30 PM" } }, { name: "د. عبدالحليم بدوي (استشاري)", en_name: "Dr. Abdelhalim Badawy (Consultant)", schedule: { "الإثنين": "01:00 PM", "الثلاثاء": "01:00 PM", "الأربعاء": "06:00 PM", "الخميس": "04:30 PM" } }, { name: "د. محمد عبدالواحد (استشاري)", en_name: "Dr. Mohamed Abdelwahed (Consultant)", schedule: { "الأحد": "05:30 PM", "الإثنين": "05:00 PM" } }, { name: "د. سامح عبدالعزيز (استشاري)", en_name: "Dr. Sameh Abdelaziz (Consultant)", schedule: { "السبت": "05:00 PM", "الأربعاء": "04:00 PM" } }, { name: "د. علي عبدالرافع (استشاري)", en_name: "Dr. Ali Abdelrafie (Consultant)", schedule: { "الإثنين": "08:00 PM", "الثلاثاء": "08:00 PM", "الأربعاء": "08:00 PM" } } ] },
        { id: "الرمد", doctors: [ { name: "د. محمد صلاح (استشاري)", en_name: "Dr. Mohamed Salah (Consultant)", schedule: { "الإثنين": "07:30 PM", "الثلاثاء": "07:30 PM", "الخميس": "07:30 PM" } }, { name: "د. حنان إسماعيل (استشاري)", en_name: "Dr. Hanan Ismail (Consultant)", schedule: { "السبت": "05:00 PM", "الأربعاء": "06:00 PM" } }, { name: "د. اميره مطاوع (اخصائي)", en_name: "Dr. Amira Motawea (Specialist)", schedule: { "الإثنين": "05:00 PM", "الخميس": "05:00 PM" } }, { name: "د. ميرفت عبدالعظيم (استشاري)", en_name: "Dr. Mervat Abdelazim (Consultant)", schedule: { "الجمعة": "02:30 PM" } }, { name: "د. محمد علي (استشاري)", en_name: "Dr. Mohamed Ali (Consultant)", schedule: { "الأحد": "08:00 PM", "الأربعاء": "08:00 PM" } } ] },
        { id: "تغذية-الأطفال", doctors: [ { name: "د. نسرين عبدالرحمن (استشاري)", en_name: "Dr. Nesrin Abdelrahman (Consultant)", schedule: { "السبت": "01:00 PM", "الثلاثاء": "02:00 PM", "الخميس": "06:30 PM" } } ] },
        { id: "مناعة-وحساسية-الأطفال", doctors: [ { name: "د. سامح عبدالعزيز (استشاري)", en_name: "Dr. Sameh Abdelaziz (Consultant)", schedule: { "السبت": "05:00 PM", "الأربعاء": "04:00 PM" } } ] },
        { id: "القلب", doctors: [ { name: "د. اشرف الأمير (استشاري)", en_name: "Dr. Ashraf Elamir (Consultant)", schedule: { "السبت": "06:00 PM", "الخميس": "08:00 PM" } }, { name: "د. محمد ابومندور (استشاري)", en_name: "Dr. Mohamed Abomandour (Consultant)", schedule: { "الأحد": "06:00 PM", "الأربعاء": "06:00 PM" } }, { name: "د. محمد زيدان (اخصائي)", en_name: "Dr. Mohamed Zeidan (Specialist)", schedule: { "الإثنين": "08:00 PM", "الثلاثاء": "08:00 PM" } } ] },
        { id: "رسم-قلب-بالمجهود-وإيكو", doctors: [ { name: "د. محمد الدمرداش (اخصائي)", en_name: "Dr. Mohamed Demerdash (Specialist)", schedule: { "السبت": "03:00 PM", "الإثنين": "03:00 PM" } } ] },
        { id: "جراحة-التجميل", doctors: [ { name: "د. اسامه الشحات (استشاري)", en_name: "Dr. Osama Elshahat (Consultant)", schedule: { "الإثنين": "04:30 PM" } } ] },
        { id: "علاج-البواسير-والشرخ-بالليزر", doctors: [ { name: "د. وائل صابر (استشاري)", en_name: "Dr. Wael Saber (Consultant)", schedule: { "الإثنين": "08:30 PM", "الجمعة": "02:30 PM" } } ] },
        { id: "الأسنان", doctors: [ { name: "د. محمود اهاب (اخصائي)", en_name: "Dr. Mahmoud Ehab (Specialist)", schedule: { "السبت": "04:00 PM", "الثلاثاء": "06:00 PM", "الأربعاء": "07:00 PM" } }, { name: "د. زياد اشرف (اخصائي)", en_name: "Dr. Ziad Ashraf (Specialist)", schedule: { "السبت": "07:00 PM", "الإثنين": "02:00 PM", "الجمعة": "02:00 PM" } }, { name: "د. نرمين حاتم (اخصائي)", en_name: "Dr. Nermin Hatem (Specialist)", schedule: { "الإثنين": "03:00 PM", "الثلاثاء": "03:00 PM" } }, { name: "د. ريم السيد (اخصائي)", en_name: "Dr. Reem Elsayed (Specialist)", schedule: { "الأحد": "06:00 PM", "الخميس": "06:30 PM" } }, { name: "د. سلمي هاني (استشاري)", en_name: "Dr. Salma Hany (Consultant)", schedule: { "السبت": "12:00 PM" } }, { name: "د. علي محسن (اخصائي)", en_name: "Dr. Ali Mohsen (Specialist)", schedule: { "الإثنين": "06:00 PM", "الأربعاء": "04:00 PM", "الخميس": "04:00 PM" } } ] },
        { id: "السمعيات", doctors: [ { name: "د. شيماء قابيل (استشاري)", en_name: "Dr. Shaimaa Qabil (Consultant)", schedule: { "الأربعاء": "06:00 PM" } }, { name: "د. هاني عبدالعزيز (استشاري)", en_name: "Dr. Hany Abdelaziz (Consultant)", schedule: { "الأحد": "12:00 PM" } } ] }
    ];

    const clinicsDisplayData = [
        { id: "الرمد", name: "الرمد", en_name: "Ophthalmology", icon: "ophthalmology.svg", isSvg: true },
        { id: "الأوعية-الدموية", name: "الأوعية الدموية", en_name: "Vascular", icon: "vascular.svg", isSvg: true },
        { id: "غدد-صماء-وسكر", name: "غدد صماء وسكر", en_name: "Endocrinology & Diabetes", icon: "endocrinology.svg", isSvg: true },
        { id: "مناعة-وروماتيزم", name: "مناعة وروماتيزم", en_name: "Immunology & Rheumatology", icon: "immunology.svg", isSvg: true },
        { id: "مناعة-وحساسية-الأطفال", name: "مناعة وحساسية الأطفال", en_name: "Pediatric Immunology & Allergy", icon: "pediatric-immunology.svg", isSvg: true },
        { id: "أنف-وأذن-وحنجرة", name: "أنف وأذن وحنجرة", en_name: "ENT", icon: "ent.svg", isSvg: true },
        { id: "الصدر", name: "الصدر", en_name: "Pulmonology", icon: "pulmonology.svg", isSvg: true },
        { id: "جهاز-هضمي-ومناظير", name: "جهاز هضمي ومناظير", en_name: "Gastroenterology & Endoscopy", icon: "gastroenterology.svg", isSvg: true },
        { id: "باطنة-وقلب", name: "باطنة وقلب", en_name: "Internal Medicine & Cardiology", icon: "internal-medicine-cardiology.svg", isSvg: true },
        { id: "الجراحة-العامة", name: "الجراحة العامة", en_name: "General Surgery", icon: "general-surgery.svg", isSvg: true },
        { id: "نساء-وتوليد", name: "نساء وتوليد", en_name: "Obstetrics & Gynecology", icon: "obgyn.svg", isSvg: true },
        { id: "العظام", name: "العظام", en_name: "Orthopedics", icon: "orthopedics.svg", isSvg: true },
        { id: "الجلدية", name: "الجلدية", en_name: "Dermatology", icon: "dermatology.svg", isSvg: true },
        { id: "المخ-والأعصاب-باطنة", name: "المخ والأعصاب (باطنة)", en_name: "Neurology", icon: "neurology.svg", isSvg: true },
        { id: "المسالك-البولية", name: "المسالك البولية", en_name: "Urology", icon: "urology.svg", isSvg: true },
        { id: "الأطفال", name: "الأطفال", en_name: "Pediatrics", icon: "pediatrics.svg", isSvg: true },
        { id: "أمراض-الدم", name: "أمراض الدم", en_name: "Hematology", icon: "hematology.svg", isSvg: true },
        
        { id: "الباطنة-العامة", name: "الباطنة العامة", en_name: "General Medicine", icon: "fa-stethoscope", isSvg: false },
        { id: "جراحة-المخ-والأعصاب", name: "جراحة المخ والأعصاب", en_name: "Neurosurgery", icon: "fa-user-md", isSvg: false },
        { id: "أمراض-الذكورة", name: "أمراض الذكورة", en_name: "Andrology", icon: "fa-mars", isSvg: false },
        { id: "تغذية-الأطفال", name: "تغذية الأطفال", en_name: "Pediatric Nutrition", icon: "fa-apple-whole", isSvg: false },
        { id: "القلب", name: "القلب", en_name: "Cardiology", icon: "fa-heart-circle-check", isSvg: false },
        { id: "رسم-قلب-بالمجهود-وإيكو", name: "رسم قلب بالمجهود وإيكو", en_name: "Stress ECG & Echocardiography", icon: "fa-wave-square", isSvg: false },
        { id: "جراحة-التجميل", name: "جراحة التجميل", en_name: "Plastic Surgery", icon: "fa-wand-magic-sparkles", isSvg: false },
        { id: "علاج-البواسير-والشرخ-بالليزر", name: "علاج البواسير والشرخ بالليزر", en_name: "Laser Proctology", icon: "fa-crosshairs", isSvg: false },
        { id: "الأسنان", name: "الأسنان", en_name: "Dentistry", icon: "fa-tooth", isSvg: false },
        { id: "السمعيات", name: "السمعيات", en_name: "Audiology", icon: "fa-assistive-listening-systems", isSvg: false }
    ].map(clinic => {
        const fullData = allClinicsFullData.find(c => c.id === clinic.id);
        return { ...clinic, doctors: fullData ? fullData.doctors : [] };
    });

    const clinicsContainer = document.getElementById('clinics-container');
    const daysMap = { "السبت": "Saturday", "الأحد": "Sunday", "الإثنين": "Monday", "الثلاثاء": "Tuesday", "الأربعاء": "Wednesday", "الخميس": "Thursday", "الجمعة": "Friday" };
    const clinicMap = new Map(clinicsDisplayData.map(c => [c.id, {name: c.name, icon: c.icon, isSvg: c.isSvg}]));

    function renderClinics(data) {
        clinicsContainer.innerHTML = '';
        data.forEach(clinic => {
            if (!clinic.doctors || clinic.doctors.length === 0) return;
            
            const section = document.createElement('div');
            section.className = 'clinic-section';
            section.id = `clinic-${clinic.id.replace(/[()\s]/g, '-')}`;
            const title = document.createElement('div');
            title.className = 'section-title';
            
            const iconHtml = clinic.isSvg 
                ? `<div class="svg-icon" style="-webkit-mask-image: url(/icons/${clinic.icon}); mask-image: url(/icons/${clinic.icon});"></div>`
                : `<i class="fa-solid ${clinic.icon}"></i>`;
            
            title.innerHTML = `
                <div class="icon">${iconHtml}</div>
                <div class="title-text">
                    <h2>${clinic.name}</h2>
                    <h3 class="en">${clinic.en_name}</h3>
                </div>
                <div class="title-nav-buttons">
                    <button class="nav-btn" data-target="search-box" title="اذهب إلى البحث"><i class="fa-solid fa-arrow-up"></i></button>
                    <button class="nav-btn" data-target="whatsapp-section" title="اذهب إلى واتساب"><i class="fa-solid fa-arrow-down"></i></button>
                </div>`;
            section.appendChild(title);
            
            clinic.doctors.forEach((doctor, index) => {
                const card = document.createElement('div');
                card.className = 'doctor-card';
                card.id = `doc-${clinic.id.replace(/[()\s]/g, '-')}-${index}`;
                const nameDiv = document.createElement('div');
                nameDiv.className = 'doctor-name';
                nameDiv.innerHTML = `<div>${doctor.name}</div><div class="en">${doctor.en_name}</div>`;
                card.appendChild(nameDiv);
                Object.keys(doctor.schedule).forEach(day => {
                    const appointmentDiv = document.createElement('div');
                    appointmentDiv.className = 'appointment';
                    appointmentDiv.innerHTML = `
                        <span class="day">${day}<br><span class="en">${daysMap[day]}</span></span>
                        <span class="time">${doctor.schedule[day]}</span>`;
                    card.appendChild(appointmentDiv);
                });
                section.appendChild(card);
            });
            clinicsContainer.appendChild(section);
        });
        
        document.querySelectorAll('.nav-btn').forEach(button => {
            button.addEventListener('click', function() {
                const targetId = this.getAttribute('data-target');
                document.getElementById(targetId).scrollIntoView({ behavior: 'smooth', block: 'center' });
            });
        });
    }

    renderClinics(clinicsDisplayData);

    const searchInput = document.getElementById('doctor-search-input');
    const searchBtn = document.getElementById('doctor-search-btn');
    const searchResultsContainer = document.getElementById('search-results-container');
    
    function performSearch() {
        const searchTerm = searchInput.value.toLowerCase().trim();
        searchResultsContainer.innerHTML = '';
        document.querySelectorAll('.doctor-card.highlight').forEach(c => c.classList.remove('highlight'));
        if (!searchTerm) {
            searchResultsContainer.style.display = 'none';
            return;
        }
        const foundDoctors = [];
        clinicsDisplayData.forEach(clinic => {
            if (clinic.doctors) {
                clinic.doctors.forEach((doctor, index) => {
                    if (doctor.name.toLowerCase().includes(searchTerm) || doctor.en_name.toLowerCase().includes(searchTerm)) {
                        foundDoctors.push({
                            ...doctor,
                            clinicName: clinic.name,
                            cardId: `doc-${clinic.id.replace(/[()\s]/g, '-')}-${index}`
                        });
                    }
                });
            }
        });
        
        searchResultsContainer.style.display = 'block';
        if (foundDoctors.length > 0) {
            foundDoctors.forEach(doctor => {
                const resultItem = document.createElement('div');
                resultItem.className = 'result-item';
                resultItem.innerHTML = `
                    <div class="result-info">
                        <strong>${doctor.name}</strong>
                        <div class="clinic-name">${doctor.clinicName}</div>
                    </div>
                    <button class="go-to-btn">اذهب إلى الطبيب</button>`;
                resultItem.querySelector('button').addEventListener('click', () => {
                    scrollToAndHighlight(doctor.cardId);
                });
                searchResultsContainer.appendChild(resultItem);
            });
        } else {
            searchResultsContainer.innerHTML = `<div class="result-item"><p>لا توجد نتائج مطابقة لبحثك.</p></div>`;
        }
    }
    
    searchBtn.addEventListener('click', performSearch);
    searchInput.addEventListener('keyup', (event) => {
        if (event.key === 'Enter') performSearch();
    });

    function scrollToAndHighlight(cardId) {
        const card = document.getElementById(cardId);
        if (card) {
            document.querySelectorAll('.doctor-card.highlight').forEach(c => c.classList.remove('highlight'));
            card.scrollIntoView({ behavior: 'smooth', block: 'center' });
            card.classList.add('highlight');
            setTimeout(() => card.classList.remove('highlight'), 3000);
        }
    }

    const getRecommendationBtn = document.getElementById('get-recommendation-btn');
    const symptomsInput = document.getElementById('symptoms-input');
    const recommendationResultContainer = document.getElementById('recommendation-result-container');
    const loader = document.getElementById('loader');
    
    const AI_FUNCTION_URL = "/api/recommend"; 

    getRecommendationBtn.addEventListener('click', async () => {
        const symptomsText = symptomsInput.value.trim();
        if (!symptomsText) {
            alert('من فضلك، قم بوصف الأعراض التي تشعر بها.');
            return;
        }

        loader.style.display = 'block';
        recommendationResultContainer.innerHTML = '';
        getRecommendationBtn.disabled = true;

        try {
            const response = await fetch(AI_FUNCTION_URL, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ symptoms: symptomsText })
            });

            if (!response.ok) {
                const errorData = await response.json().catch(() => ({}));
                throw new Error(errorData.error || 'حدث خطأ أثناء التواصل مع المساعد الذكي.');
            }

            const data = await response.json();
            
            if (data.recommendations && data.recommendations.length > 0) {
                displayRecommendations(data.recommendations);
            } else {
                 displayFallback();
            }

        } catch (error) {
            console.error("Error:", error);
            displayFallback('عفواً، حدث خطأ تقني. يرجى المحاولة مرة أخرى.');
        } finally {
            loader.style.display = 'none';
            getRecommendationBtn.disabled = false;
        }
    });

    function displayRecommendations(recommendations) {
        recommendationResultContainer.innerHTML = '';
        recommendations.forEach((rec, index) => {
            const clinicInfo = clinicMap.get(rec.id);
            if (!clinicInfo) return;

            const isPrimary = index === 0;
            const card = document.createElement('div');
            card.className = `recommendation-card ${isPrimary ? 'primary-recommendation' : ''}`;
            
            const iconHtml = clinicInfo.isSvg 
                ? `<div class="svg-icon" style="-webkit-mask-image: url(/icons/${clinicInfo.icon}); mask-image: url(/icons/${clinicInfo.icon});"></div>`
                : `<i class="fa-solid ${clinicInfo.icon}"></i>`;

            card.innerHTML = `
                <div class="recommendation-header">
                    <div class="icon">${iconHtml}</div>
                    <h3>${clinicInfo.name}</h3>
                    ${isPrimary ? '<span class="recommendation-badge">الترشيح الأنسب</span>' : '<span class="recommendation-badge" style="background-color: #6c757d;">ترشيح بديل</span>'}
                </div>
                <p class="recommendation-reason">${rec.reason}</p>
            `;

            const button = document.createElement('button');
            button.className = 'go-to-btn';
            button.innerHTML = `اذهب إلى عيادة ${clinicInfo.name} <i class="fa-solid fa-arrow-down"></i>`;
            button.onclick = () => {
                const clinicSectionId = `clinic-${rec.id.replace(/[()\s]/g, '-')}`;
                const clinicSection = document.getElementById(clinicSectionId);
                if (clinicSection) {
                    clinicSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            };
            card.appendChild(button);
            recommendationResultContainer.appendChild(card);
        });
    }

    function displayFallback(message = null) {
        const fallbackMessage = message || 'لم نتمكن من تحديد تخصص دقيق بناءً على الوصف. في هذه الحالة، نقترح عليك التوجه لعيادة <strong>الباطنة العامة</strong>، حيث يمكن للطبيب إجراء تشخيص مبدئي شامل وتوجيهك للتخصص الصحيح إذا لزم الأمر.';
        const clinicInfo = clinicMap.get("الباطنة-العامة");
        
        const iconHtml = clinicInfo.isSvg 
            ? `<div class="svg-icon" style="-webkit-mask-image: url(/icons/${clinicInfo.icon}); mask-image: url(/icons/${clinicInfo.icon});"></div>`
            : `<i class="fa-solid ${clinicInfo.icon}"></i>`;
        
        recommendationResultContainer.innerHTML = `
            <div class="recommendation-card primary-recommendation">
                 <div class="recommendation-header">
                    <div class="icon">${iconHtml}</div>
                    <h3>الباطنة العامة</h3>
                    <span class="recommendation-badge">الترشيح المبدئي</span>
                </div>
                <p class="recommendation-reason">${fallbackMessage}</p>
            </div>
        `;
        const button = document.createElement('button');
        button.className = 'go-to-btn';
        button.innerHTML = `اذهب إلى عيادة الباطنة العامة <i class="fa-solid fa-arrow-down"></i>`;
        button.onclick = () => {
            const clinicSection = document.getElementById('clinic-الباطنة-العامة');
            if (clinicSection) {
                clinicSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        };
        recommendationResultContainer.querySelector('.recommendation-card').appendChild(button);
    }
});
</script>

</body>
</html>
